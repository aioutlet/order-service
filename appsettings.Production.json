{
  "Environment": "production",
  "ServiceName": "order-service",
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning",
        "Microsoft.EntityFrameworkCore": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "/var/log/order-service.log",
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30
        }
      }
    ],
    "Enrich": ["FromLogContext", "WithMachineName", "WithThreadId"],
    "Properties": {
      "Service": "order-service",
      "Environment": "production"
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "OrderService": "Information"
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "${DATABASE_URL}"
  },
  "OrderService": {
    "DefaultCurrency": "USD",
    "TaxRate": "${TAX_RATE}",
    "FreeShippingThreshold": "${FREE_SHIPPING_THRESHOLD}",
    "DefaultShippingCost": "${DEFAULT_SHIPPING_COST}",
    "OrderNumberPrefix": "ORD"
  },
  "DetailedErrors": false,
  "Api": {
    "Title": "Order Service API",
    "Version": "v1",
    "Description": "Production Order Service API"
  },
  "Jwt": {
    "Issuer": "${JWT_ISSUER}",
    "Audience": "${JWT_AUDIENCE}",
    "Key": "${JWT_SECRET_KEY}"
  },
  "MessageBroker": {
    "Provider": "${MESSAGE_BROKER_PROVIDER}",
    "RabbitMQ": {
      "ConnectionString": "${RABBITMQ_CONNECTION_STRING}",
      "Exchange": "orders.exchange",
      "ExchangeType": "topic",
      "PublisherConfirms": true,
      "RetryAttempts": 3
    },
    "AzureServiceBus": {
      "Namespace": "${AZURE_SERVICEBUS_NAMESPACE}",
      "UseManagedIdentity": true,
      "ConnectionString": "${AZURE_SERVICEBUS_CONNECTION_STRING}",
      "RetryAttempts": 3,
      "RetryDelayMs": 1000
    },
    "Topics": {
      "OrderCreated": "order.created",
      "OrderUpdated": "order.updated",
      "OrderCancelled": "order.cancelled"
    }
  }
}
